---
title: Connect to Common Data Service | Microsoft Docs
description: You can integrate other apps with Business Central through Common Data Service.
author: bholtorf
ms.service: dynamics365-business-central
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 07/24/2020
ms.author: bholtorf
ms.openlocfilehash: 10a257b60aedfb22066148fd48145779cd6d4a62
ms.sourcegitcommit: ac492bff0c87bf2a23fa93113e7571da9d5094c7
ms.translationtype: HT
ms.contentlocale: en-NZ
ms.lasthandoff: 08/19/2020
ms.locfileid: "3702008"
---
# <a name="connect-to-common-data-service"></a><span data-ttu-id="254d6-103">Connect to Common Data Service</span><span class="sxs-lookup"><span data-stu-id="254d6-103">Connect to Common Data Service</span></span>

<span data-ttu-id="254d6-104">This topic describes how to set up a connection between [!INCLUDE[d365fin](includes/d365fin_md.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-104">This topic describes how to set up a connection between [!INCLUDE[d365fin](includes/d365fin_md.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="254d6-105">Typically, businesses create the connection to integrate and synchronise data with another Dynamics 365 business app, such as [!INCLUDE[crm_md](includes/crm_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-105">Typically, businesses create the connection to integrate and synchronize data with another Dynamics 365 business app, such as [!INCLUDE[crm_md](includes/crm_md.md)].</span></span>  

## <a name="before-you-start"></a><span data-ttu-id="254d6-106">Before You Start</span><span class="sxs-lookup"><span data-stu-id="254d6-106">Before You Start</span></span>

<span data-ttu-id="254d6-107">There are a few pieces of information to have ready before you create the connection:</span><span class="sxs-lookup"><span data-stu-id="254d6-107">There are a few pieces of information to have ready before you create the connection:</span></span>  

* <span data-ttu-id="254d6-108">The URL for the [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment that you want to connect to.</span><span class="sxs-lookup"><span data-stu-id="254d6-108">The URL for the [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment that you want to connect to.</span></span> <span data-ttu-id="254d6-109">If you use the **CDS Connection Setup** assisted setup guide to create the connection we will discover your environments, but you can also enter the URL of another environment in your tenant.</span><span class="sxs-lookup"><span data-stu-id="254d6-109">If you use the **CDS Connection Setup** assisted setup guide to create the connection we will discover your environments, but you can also enter the URL of another environment in your tenant.</span></span>  
* <span data-ttu-id="254d6-110">The user name and password of an account that has administrator permissions in [!INCLUDE[d365fin](includes/d365fin_md.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-110">The user name and password of an account that has administrator permissions in [!INCLUDE[d365fin](includes/d365fin_md.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  

> [!Note]
> <span data-ttu-id="254d6-111">These steps describe the procedure for the online version of [!INCLUDE[d365fin](includes/d365fin_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-111">These steps describe the procedure for the online version of [!INCLUDE[d365fin](includes/d365fin_md.md)].</span></span>
> <span data-ttu-id="254d6-112">If you are using Business Central on-premises and are not using Azure Active Directory account to connect to [!INCLUDE [cds_long_md](includes/cds_long_md.md)], you must also specify a user name and password of a user account for the integration.</span><span class="sxs-lookup"><span data-stu-id="254d6-112">If you are using Business Central on-premises and are not using Azure Active Directory account to connect to [!INCLUDE [cds_long_md](includes/cds_long_md.md)], you must also specify a user name and password of a user account for the integration.</span></span> <span data-ttu-id="254d6-113">This account is referred to as the "integration user" account.</span><span class="sxs-lookup"><span data-stu-id="254d6-113">This account is referred to as the "integration user" account.</span></span> <span data-ttu-id="254d6-114">If you are using an Azure Active Directory account the integration user account is not required or displayed.</span><span class="sxs-lookup"><span data-stu-id="254d6-114">If you are using an Azure Active Directory account the integration user account is not required or displayed.</span></span> <span data-ttu-id="254d6-115">The integration user will be set up automatically and does not require a licence.</span><span class="sxs-lookup"><span data-stu-id="254d6-115">The integration user will be set up automatically and does not require a license.</span></span>

## <a name="set-up-a-connection-to-cds_long_md"></a><span data-ttu-id="254d6-116">Set Up a Connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span><span class="sxs-lookup"><span data-stu-id="254d6-116">Set Up a Connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span></span>

<span data-ttu-id="254d6-117">For all authentication types other than Office 365 authentication, you set up your connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on the **CDS Connection Setup** page.</span><span class="sxs-lookup"><span data-stu-id="254d6-117">For all authentication types other than Office 365 authentication, you set up your connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on the **CDS Connection Setup** page.</span></span> <span data-ttu-id="254d6-118">For Office 365 authentication, we recommend that you use the **Set up Common Data Service connection** assisted setup guide.</span><span class="sxs-lookup"><span data-stu-id="254d6-118">For Office 365 authentication, we recommend that you use the **Set up Common Data Service connection** assisted setup guide.</span></span> <span data-ttu-id="254d6-119">The guide makes it easier to set up the connection and specify advanced features, such as ownership model and initial synchronisation.</span><span class="sxs-lookup"><span data-stu-id="254d6-119">The guide makes it easier to set up the connection and specify advanced features, such as ownership model and initial synchronization.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="254d6-120">During the setup of the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], the administrator will be asked to give following permissions to registered Azure application named [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:</span><span class="sxs-lookup"><span data-stu-id="254d6-120">During the setup of the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], the administrator will be asked to give following permissions to registered Azure application named [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)]:</span></span>
>
> * <span data-ttu-id="254d6-121">**Access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] as you** permission is needed so [!INCLUDE[d365fin](includes/d365fin_md.md)] can, on behalf of administrator, automatically create non-licensed non-interactive [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration application user, assign security roles to this user and to deploy [!INCLUDE[d365fin](includes/d365fin_md.md)] Base CDS Integration Solution to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-121">**Access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] as you** permission is needed so [!INCLUDE[d365fin](includes/d365fin_md.md)] can, on behalf of administrator, automatically create non-licensed non-interactive [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration application user, assign security roles to this user and to deploy [!INCLUDE[d365fin](includes/d365fin_md.md)] Base CDS Integration Solution to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="254d6-122">This permission is used only once during set up of connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-122">This permission is used only once during set up of connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
> * <span data-ttu-id="254d6-123">**Have full access to Dynamics 365 [!INCLUDE[d365fin](includes/d365fin_md.md)]** permission is needed so automatically created [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration application user can access [!INCLUDE[d365fin](includes/d365fin_md.md)] data that will be synchronised.</span><span class="sxs-lookup"><span data-stu-id="254d6-123">**Have full access to Dynamics 365 [!INCLUDE[d365fin](includes/d365fin_md.md)]** permission is needed so automatically created [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration application user can access [!INCLUDE[d365fin](includes/d365fin_md.md)] data that will be synchronized.</span></span>  
> * <span data-ttu-id="254d6-124">**Sign in and read your profile** permission is needed to verify user logging in actually has System Administrator security role assigned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-124">**Sign in and read your profile** permission is needed to verify user logging in actually has System Administrator security role assigned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>  
>
> <span data-ttu-id="254d6-125">By giving consent on behalf of organisation, the administrator is entitling the registered Azure application called [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to synchronise data using automatically created [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration application user's credentials.</span><span class="sxs-lookup"><span data-stu-id="254d6-125">By giving consent on behalf of organization, the administrator is entitling the registered Azure application called [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to synchronize data using automatically created [!INCLUDE[d365fin](includes/d365fin_md.md)] Integration application user's credentials.</span></span>

### <a name="to-use-the-set-up-common-data-service-connection-assisted-setup-guide"></a><span data-ttu-id="254d6-126">To use the Set up Common Data Service connection assisted setup guide</span><span class="sxs-lookup"><span data-stu-id="254d6-126">To use the Set up Common Data Service connection assisted setup guide</span></span>

1. <span data-ttu-id="254d6-127">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Assisted Setup**, and then choose the related link.</span><span class="sxs-lookup"><span data-stu-id="254d6-127">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **Assisted Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="254d6-128">Choose **Set up Common Data Service connection** to start the assisted setup guide.</span><span class="sxs-lookup"><span data-stu-id="254d6-128">Choose **Set up Common Data Service connection** to start the assisted setup guide.</span></span>
3. <span data-ttu-id="254d6-129">Fill in the fields as necessary.</span><span class="sxs-lookup"><span data-stu-id="254d6-129">Fill in the fields as necessary.</span></span>

### <a name="to-create-or-maintain-the-connection-manually"></a><span data-ttu-id="254d6-130">To create or maintain the connection manually</span><span class="sxs-lookup"><span data-stu-id="254d6-130">To create or maintain the connection manually</span></span>

<span data-ttu-id="254d6-131">The following procedure describes how to set up the connection manually on the **CDS Connection Setup** page manually.</span><span class="sxs-lookup"><span data-stu-id="254d6-131">The following procedure describes how to set up the connection manually on the **CDS Connection Setup** page manually.</span></span> <span data-ttu-id="254d6-132">This is also the page where you manage settings for the integration.</span><span class="sxs-lookup"><span data-stu-id="254d6-132">This is also the page where you manage settings for the integration.</span></span>

1. <span data-ttu-id="254d6-133">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **CDS Connection Setup**, and then choose the related link.</span><span class="sxs-lookup"><span data-stu-id="254d6-133">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **CDS Connection Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="254d6-134">Enter the following information for the connection from [!INCLUDE[d365fin](includes/d365fin_md.md)] to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-134">Enter the following information for the connection from [!INCLUDE[d365fin](includes/d365fin_md.md)] to [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span>

    |<span data-ttu-id="254d6-135">Field</span><span class="sxs-lookup"><span data-stu-id="254d6-135">Field</span></span>|<span data-ttu-id="254d6-136">Description</span><span class="sxs-lookup"><span data-stu-id="254d6-136">Description</span></span>|
    |-----|-----|
    |<span data-ttu-id="254d6-137">**Environment URL**</span><span class="sxs-lookup"><span data-stu-id="254d6-137">**Environment URL**</span></span>|<span data-ttu-id="254d6-138">If you own environments in [!INCLUDE[cds_long_md](includes/cds_long_md.md)], we will find those for you when you run the setup guide.</span><span class="sxs-lookup"><span data-stu-id="254d6-138">If you own environments in [!INCLUDE[cds_long_md](includes/cds_long_md.md)], we will find those for you when you run the setup guide.</span></span> <span data-ttu-id="254d6-139">If you want to connect to a different environment in another tenant, you can enter the administrator credentials for the environment and we will discover those.</span><span class="sxs-lookup"><span data-stu-id="254d6-139">If you want to connect to a different environment in another tenant, you can enter the administrator credentials for the environment and we will discover those.</span></span> |
    |<span data-ttu-id="254d6-140">**Enabled**</span><span class="sxs-lookup"><span data-stu-id="254d6-140">**Enabled**</span></span>|<span data-ttu-id="254d6-141">Start using the integration.</span><span class="sxs-lookup"><span data-stu-id="254d6-141">Start using the integration.</span></span> <span data-ttu-id="254d6-142">If you do not enable the connection now, the connection settings will be saved but users will not be able to access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] data from [!INCLUDE[d365fin](includes/d365fin_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-142">If you do not enable the connection now, the connection settings will be saved but users will not be able to access [!INCLUDE[cds_long_md](includes/cds_long_md.md)] data from [!INCLUDE[d365fin](includes/d365fin_md.md)].</span></span> <span data-ttu-id="254d6-143">You can return to this page and enable the connection later.</span><span class="sxs-lookup"><span data-stu-id="254d6-143">You can return to this page and enable the connection later.</span></span>  |

3. <span data-ttu-id="254d6-144">In the **Ownership Model** field, choose whether you want a team entity in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to own new records, or one or more specific users.</span><span class="sxs-lookup"><span data-stu-id="254d6-144">In the **Ownership Model** field, choose whether you want a team entity in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] to own new records, or one or more specific users.</span></span> <span data-ttu-id="254d6-145">If you choose **Person**, you must specify each user.</span><span class="sxs-lookup"><span data-stu-id="254d6-145">If you choose **Person**, you must specify each user.</span></span> <span data-ttu-id="254d6-146">If you choose **Team**, the default business unit BCI_Company will display in the **Coupled Business Unit** field.</span><span class="sxs-lookup"><span data-stu-id="254d6-146">If you choose **Team**, the default business unit BCI_Company will display in the **Coupled Business Unit** field.</span></span>

    <!--Need to verify the details in this table, are these specific to Sales maybe?-->
    <span data-ttu-id="254d6-147">Enter the following advanced settings.</span><span class="sxs-lookup"><span data-stu-id="254d6-147">Enter the following advanced settings.</span></span>

    |<span data-ttu-id="254d6-148">Field</span><span class="sxs-lookup"><span data-stu-id="254d6-148">Field</span></span>|<span data-ttu-id="254d6-149">Description</span><span class="sxs-lookup"><span data-stu-id="254d6-149">Description</span></span>|
    |-----|-----|
    |<span data-ttu-id="254d6-150">**[!INCLUDE[d365fin](includes/d365fin_md.md)] Users Must Map to CDS Users**</span><span class="sxs-lookup"><span data-stu-id="254d6-150">**[!INCLUDE[d365fin](includes/d365fin_md.md)] Users Must Map to CDS Users**</span></span>|<span data-ttu-id="254d6-151">If you are using the Person ownership model, specify whether [!INCLUDE[d365fin](includes/d365fin_md.md)] user accounts must have a matching user accounts in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-151">If you are using the Person ownership model, specify whether [!INCLUDE[d365fin](includes/d365fin_md.md)] user accounts must have a matching user accounts in [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <span data-ttu-id="254d6-152">The **Office 365 Authentication Email** of the [!INCLUDE[d365fin](includes/d365fin_md.md)] user must be the same as the **Primary Email** of the [!INCLUDE[crm_md](includes/crm_md.md)] user.</span><span class="sxs-lookup"><span data-stu-id="254d6-152">The **Office 365 Authentication Email** of the [!INCLUDE[d365fin](includes/d365fin_md.md)] user must be the same as the **Primary Email** of the [!INCLUDE[crm_md](includes/crm_md.md)] user.</span></span><br /><br /> <span data-ttu-id="254d6-153">If you set the value to **Yes**, [!INCLUDE[d365fin](includes/d365fin_md.md)] users who do not have a matching [!INCLUDE[crm_md](includes/crm_md.md)] user account will not have [!INCLUDE[d365fin](includes/d365fin_md.md)] integration capabilities in the user interface.</span><span class="sxs-lookup"><span data-stu-id="254d6-153">If you set the value to **Yes**, [!INCLUDE[d365fin](includes/d365fin_md.md)] users who do not have a matching [!INCLUDE[crm_md](includes/crm_md.md)] user account will not have [!INCLUDE[d365fin](includes/d365fin_md.md)] integration capabilities in the user interface.</span></span> <span data-ttu-id="254d6-154">Access to [!INCLUDE[crm_md](includes/crm_md.md)] data directly from [!INCLUDE[d365fin](includes/d365fin_md.md)] is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] user account.</span><span class="sxs-lookup"><span data-stu-id="254d6-154">Access to [!INCLUDE[crm_md](includes/crm_md.md)] data directly from [!INCLUDE[d365fin](includes/d365fin_md.md)] is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] user account.</span></span><br /><br /> <span data-ttu-id="254d6-155">If you set the value to **No**, all [!INCLUDE[d365fin](includes/d365fin_md.md)] users will have [!INCLUDE[crm_md](includes/crm_md.md)] integration capabilities in the user interface.</span><span class="sxs-lookup"><span data-stu-id="254d6-155">If you set the value to **No**, all [!INCLUDE[d365fin](includes/d365fin_md.md)] users will have [!INCLUDE[crm_md](includes/crm_md.md)] integration capabilities in the user interface.</span></span> <span data-ttu-id="254d6-156">Access to [!INCLUDE[crm_md](includes/crm_md.md)] data is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] connection (integration) user.</span><span class="sxs-lookup"><span data-stu-id="254d6-156">Access to [!INCLUDE[crm_md](includes/crm_md.md)] data is done on behalf of the [!INCLUDE[crm_md](includes/crm_md.md)] connection (integration) user.</span></span>|
    |<span data-ttu-id="254d6-157">**Current Business Central Salesperson is Mapped to a User**</span><span class="sxs-lookup"><span data-stu-id="254d6-157">**Current Business Central Salesperson is Mapped to a User**</span></span>|<span data-ttu-id="254d6-158">Indicates whether your user account is mapped to an account in [!INCLUDE[crm_md](includes/crm_md.md)]</span><span class="sxs-lookup"><span data-stu-id="254d6-158">Indicates whether your user account is mapped to an account in [!INCLUDE[crm_md](includes/crm_md.md)]</span></span> <!--double check the name of this field-->|

4. <span data-ttu-id="254d6-159">To test the connection settings, choose **Connection**, and then **Test Connection**.</span><span class="sxs-lookup"><span data-stu-id="254d6-159">To test the connection settings, choose **Connection**, and then **Test Connection**.</span></span>  

    > [!NOTE]  
    > <span data-ttu-id="254d6-160">If data encryption is not enabled in [!INCLUDE[d365fin](includes/d365fin_md.md)], you will be asked whether you want to enable it.</span><span class="sxs-lookup"><span data-stu-id="254d6-160">If data encryption is not enabled in [!INCLUDE[d365fin](includes/d365fin_md.md)], you will be asked whether you want to enable it.</span></span> <span data-ttu-id="254d6-161">To enable data encryption, choose **Yes** and provide the required information.</span><span class="sxs-lookup"><span data-stu-id="254d6-161">To enable data encryption, choose **Yes** and provide the required information.</span></span> <span data-ttu-id="254d6-162">Otherwise, choose **No**.</span><span class="sxs-lookup"><span data-stu-id="254d6-162">Otherwise, choose **No**.</span></span> <span data-ttu-id="254d6-163">You can enable data encryption later.</span><span class="sxs-lookup"><span data-stu-id="254d6-163">You can enable data encryption later.</span></span> <span data-ttu-id="254d6-164">For more information, see [Encrypting Data in Dynamics 365 Business Central](/dynamics365/business-central/dev-itpro/developer/devenv-encrypting-data) in the developer and administration help.</span><span class="sxs-lookup"><span data-stu-id="254d6-164">For more information, see [Encrypting Data in Dynamics 365 Business Central](/dynamics365/business-central/dev-itpro/developer/devenv-encrypting-data) in the developer and administration help.</span></span>  

5. <span data-ttu-id="254d6-165">If [!INCLUDE[cds_long_md](includes/cds_long_md.md)] synchronisation is not already set up, you will be asked whether you want to use the default synchronisation setup.</span><span class="sxs-lookup"><span data-stu-id="254d6-165">If [!INCLUDE[cds_long_md](includes/cds_long_md.md)] synchronization is not already set up, you will be asked whether you want to use the default synchronization setup.</span></span> <span data-ttu-id="254d6-166">Depending on whether you want to keep records aligned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and [!INCLUDE[d365fin](includes/d365fin_md.md)], choose **Yes** or **No**.</span><span class="sxs-lookup"><span data-stu-id="254d6-166">Depending on whether you want to keep records aligned in [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and [!INCLUDE[d365fin](includes/d365fin_md.md)], choose **Yes** or **No**.</span></span>

## <a name="show-me-the-process"></a><span data-ttu-id="254d6-167">Show Me the Process</span><span class="sxs-lookup"><span data-stu-id="254d6-167">Show Me the Process</span></span>

<span data-ttu-id="254d6-168">The following video shows the steps to connect [!INCLUDE[d365fin](includes/d365fin_md.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-168">The following video shows the steps to connect [!INCLUDE[d365fin](includes/d365fin_md.md)] and [!INCLUDE[cds_long_md](includes/cds_long_md.md)].</span></span> <br>
  
> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4ArlP]

## <a name="connecting-on-premises-versions"></a><span data-ttu-id="254d6-169">Connecting On-Premises Versions</span><span class="sxs-lookup"><span data-stu-id="254d6-169">Connecting On-Premises Versions</span></span>

<span data-ttu-id="254d6-170">To connect [!INCLUDE[d365fin](includes/d365fin_md.md)] on-premises to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], you must specify some information on the **Common Data Service Connection Setup** page.</span><span class="sxs-lookup"><span data-stu-id="254d6-170">To connect [!INCLUDE[d365fin](includes/d365fin_md.md)] on-premises to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], you must specify some information on the **Common Data Service Connection Setup** page.</span></span>

<span data-ttu-id="254d6-171">If you want to connect using an Azure Active Directory (Azure AD) account, you must register an application in Azure AD, and provide the application ID, key vault secret, and the redirect URL to use.</span><span class="sxs-lookup"><span data-stu-id="254d6-171">If you want to connect using an Azure Active Directory (Azure AD) account, you must register an application in Azure AD, and provide the application ID, key vault secret, and the redirect URL to use.</span></span> <span data-ttu-id="254d6-172">The redirect URL is pre-populated and should work for most installations.</span><span class="sxs-lookup"><span data-stu-id="254d6-172">The redirect URL is pre-populated and should work for most installations.</span></span> <span data-ttu-id="254d6-173">You must set up your installation to use HTTPS.</span><span class="sxs-lookup"><span data-stu-id="254d6-173">You must set up your installation to use HTTPS.</span></span> <span data-ttu-id="254d6-174">For more information, see [Configuring SSL to Secure the Business Central Web Client Connection](/dynamics365/business-central/dev-itpro/deployment/configure-ssl-web-client-connection).</span><span class="sxs-lookup"><span data-stu-id="254d6-174">For more information, see [Configuring SSL to Secure the Business Central Web Client Connection](/dynamics365/business-central/dev-itpro/deployment/configure-ssl-web-client-connection).</span></span> <span data-ttu-id="254d6-175">If you are setting up your server to have a different home page, you can always change the URL.</span><span class="sxs-lookup"><span data-stu-id="254d6-175">If you are setting up your server to have a different home page, you can always change the URL.</span></span> <span data-ttu-id="254d6-176">The client secret will be saved as an encrypted string in your database.</span><span class="sxs-lookup"><span data-stu-id="254d6-176">The client secret will be saved as an encrypted string in your database.</span></span>  

### <a name="to-register-an-application-in-azure-ad-for-connecting-from-business-central-to-common-data-service"></a><span data-ttu-id="254d6-177">To register an application in Azure AD for connecting from Business Central to Common Data Service</span><span class="sxs-lookup"><span data-stu-id="254d6-177">To register an application in Azure AD for connecting from Business Central to Common Data Service</span></span>

<span data-ttu-id="254d6-178">The following steps assume that you use Azure AD to manage identities and access.</span><span class="sxs-lookup"><span data-stu-id="254d6-178">The following steps assume that you use Azure AD to manage identities and access.</span></span> <span data-ttu-id="254d6-179">For more information about registering an application in Azure AD, see [Quickstart: Register an application with the Microsoft identity platform](/azure/active-directory/develop/quickstart-register-app).</span><span class="sxs-lookup"><span data-stu-id="254d6-179">For more information about registering an application in Azure AD, see [Quickstart: Register an application with the Microsoft identity platform](/azure/active-directory/develop/quickstart-register-app).</span></span> <span data-ttu-id="254d6-180">If you do not use Azure AD, see [Using Another Identity and Access Management Service](admin-how-to-set-up-a-dynamics-crm-connection.md#using-another-identity-and-access-management-service).</span><span class="sxs-lookup"><span data-stu-id="254d6-180">If you do not use Azure AD, see [Using Another Identity and Access Management Service](admin-how-to-set-up-a-dynamics-crm-connection.md#using-another-identity-and-access-management-service).</span></span>  

1. <span data-ttu-id="254d6-181">In the Azure Portal, under **Manage** on the Navigation Pane, choose **Authentication**.</span><span class="sxs-lookup"><span data-stu-id="254d6-181">In the Azure Portal, under **Manage** on the Navigation Pane, choose **Authentication**.</span></span>  
2. <span data-ttu-id="254d6-182">Under **Redirect URLs**, add the redirect URL that is suggested on the **Common Data Service Connection Setup** page in [!INCLUDE[d365fin](includes/d365fin_md.md)].</span><span class="sxs-lookup"><span data-stu-id="254d6-182">Under **Redirect URLs**, add the redirect URL that is suggested on the **Common Data Service Connection Setup** page in [!INCLUDE[d365fin](includes/d365fin_md.md)].</span></span>
3. <span data-ttu-id="254d6-183">Under **Manage**, choose **API permissions**.</span><span class="sxs-lookup"><span data-stu-id="254d6-183">Under **Manage**, choose **API permissions**.</span></span>
4. <span data-ttu-id="254d6-184">Under **Configured permissions**, choose **Add a permission**, and then add delegated permissions on the **Microsoft APIs** tab as follows:</span><span class="sxs-lookup"><span data-stu-id="254d6-184">Under **Configured permissions**, choose **Add a permission**, and then add delegated permissions on the **Microsoft APIs** tab as follows:</span></span>
    * <span data-ttu-id="254d6-185">For Business Central, add the **Financials.ReadWrite.All** permissions.</span><span class="sxs-lookup"><span data-stu-id="254d6-185">For Business Central, add the **Financials.ReadWrite.All** permissions.</span></span>
    * <span data-ttu-id="254d6-186">For Dynamics CRM, add the **user_impersonation** permissions.</span><span class="sxs-lookup"><span data-stu-id="254d6-186">For Dynamics CRM, add the **user_impersonation** permissions.</span></span>  

    > [!NOTE]
    > <span data-ttu-id="254d6-187">The name of the Dynamics CRM API might change.</span><span class="sxs-lookup"><span data-stu-id="254d6-187">The name of the Dynamics CRM API might change.</span></span>

5. <span data-ttu-id="254d6-188">Under **Manage**, choose **Certificates & Secrets**, and then create a new secret for your app.</span><span class="sxs-lookup"><span data-stu-id="254d6-188">Under **Manage**, choose **Certificates & Secrets**, and then create a new secret for your app.</span></span> <span data-ttu-id="254d6-189">You will use the secret either in [!INCLUDE[d365fin](includes/d365fin_md.md)], in the **Client Secret** field on the **Common Data Service Connection Setup** page, or store in a secure storage and provide it in an event subscriber as described earlier in this topic.</span><span class="sxs-lookup"><span data-stu-id="254d6-189">You will use the secret either in [!INCLUDE[d365fin](includes/d365fin_md.md)], in the **Client Secret** field on the **Common Data Service Connection Setup** page, or store in a secure storage and provide it in an event subscriber as described earlier in this topic.</span></span>
6. <span data-ttu-id="254d6-190">Choose **Overview**, and then find the **Application (client) ID** value.</span><span class="sxs-lookup"><span data-stu-id="254d6-190">Choose **Overview**, and then find the **Application (client) ID** value.</span></span> <span data-ttu-id="254d6-191">This is the Client ID of your application.</span><span class="sxs-lookup"><span data-stu-id="254d6-191">This is the Client ID of your application.</span></span> <span data-ttu-id="254d6-192">You must enter it either on the **Common Data Service Connection Setup** page in the **Client ID** field, or store it in a secure storage and provide it in an event subscriber.</span><span class="sxs-lookup"><span data-stu-id="254d6-192">You must enter it either on the **Common Data Service Connection Setup** page in the **Client ID** field, or store it in a secure storage and provide it in an event subscriber.</span></span>
7. <span data-ttu-id="254d6-193">In [!INCLUDE[d365fin](includes/d365fin_md.md)], on the **Common Data Service Connection Setup** page, in the **Environment URL** field, enter the URL for your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment.</span><span class="sxs-lookup"><span data-stu-id="254d6-193">In [!INCLUDE[d365fin](includes/d365fin_md.md)], on the **Common Data Service Connection Setup** page, in the **Environment URL** field, enter the URL for your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment.</span></span>
8. <span data-ttu-id="254d6-194">To enable the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], turn on the **Enabled** toggle.</span><span class="sxs-lookup"><span data-stu-id="254d6-194">To enable the connection to [!INCLUDE[cds_long_md](includes/cds_long_md.md)], turn on the **Enabled** toggle.</span></span>
9. <span data-ttu-id="254d6-195">Sign in with your administrator account for Azure Active Directory (this account must have a valid licence for [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and be an administrator in your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment).</span><span class="sxs-lookup"><span data-stu-id="254d6-195">Sign in with your administrator account for Azure Active Directory (this account must have a valid license for [!INCLUDE[cds_long_md](includes/cds_long_md.md)] and be an administrator in your [!INCLUDE[cds_long_md](includes/cds_long_md.md)] environment).</span></span> <span data-ttu-id="254d6-196">After you sign in you will be prompted to allow your registered application to sign in to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on behalf of the organisation.</span><span class="sxs-lookup"><span data-stu-id="254d6-196">After you sign in you will be prompted to allow your registered application to sign in to [!INCLUDE[cds_long_md](includes/cds_long_md.md)] on behalf of the organization.</span></span> <span data-ttu-id="254d6-197">You must give consent to complete the setup.</span><span class="sxs-lookup"><span data-stu-id="254d6-197">You must give consent to complete the setup.</span></span>

   > [!NOTE]
   > <span data-ttu-id="254d6-198">If you are not prompted to sign in with your administrator account, it is probably because pop ups are blocked.</span><span class="sxs-lookup"><span data-stu-id="254d6-198">If you are not prompted to sign in with your administrator account, it is probably because pop ups are blocked.</span></span> <span data-ttu-id="254d6-199">To sign in, allow pop-ups from `https://login.microsoftonline.com`.</span><span class="sxs-lookup"><span data-stu-id="254d6-199">To sign in, allow pop-ups from `https://login.microsoftonline.com`.</span></span>

#### <a name="using-another-identity-and-access-management-service"></a><span data-ttu-id="254d6-200">Using Another Identity and Access Management Service</span><span class="sxs-lookup"><span data-stu-id="254d6-200">Using Another Identity and Access Management Service</span></span>

<span data-ttu-id="254d6-201">If you are not using Azure Active Directory to manage identities and access, you will need some help from a developer.</span><span class="sxs-lookup"><span data-stu-id="254d6-201">If you are not using Azure Active Directory to manage identities and access, you will need some help from a developer.</span></span> <span data-ttu-id="254d6-202">If you prefer to store the app ID and secret in a different location, you can leave the Client ID and Client Secret fields blank and write an extension to fetch the ID and secret from the location.</span><span class="sxs-lookup"><span data-stu-id="254d6-202">If you prefer to store the app ID and secret in a different location, you can leave the Client ID and Client Secret fields blank and write an extension to fetch the ID and secret from the location.</span></span> <span data-ttu-id="254d6-203">You can provide the secret at runtime by subscribing to the OnGetCDSConnectionClientId and OnGetCDSConnectionClientSecret events in codeunit 7201 "CDS Integration Impl."</span><span class="sxs-lookup"><span data-stu-id="254d6-203">You can provide the secret at runtime by subscribing to the OnGetCDSConnectionClientId and OnGetCDSConnectionClientSecret events in codeunit 7201 "CDS Integration Impl."</span></span>

### <a name="to-disconnect-from-cds_long_md"></a><span data-ttu-id="254d6-204">To disconnect from [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span><span class="sxs-lookup"><span data-stu-id="254d6-204">To disconnect from [!INCLUDE[cds_long_md](includes/cds_long_md.md)]</span></span>

1. <span data-ttu-id="254d6-205">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **CDS Connection Setup**, and then choose the related link.</span><span class="sxs-lookup"><span data-stu-id="254d6-205">Choose the ![Lightbulb that opens the Tell Me feature](media/ui-search/search_small.png "Tell me what you want to do") icon, enter **CDS Connection Setup**, and then choose the related link.</span></span>
2. <span data-ttu-id="254d6-206">On the **CDS Connection Setup** page, turn off the **Enabled** toggle.</span><span class="sxs-lookup"><span data-stu-id="254d6-206">On the **CDS Connection Setup** page, turn off the **Enabled** toggle.</span></span>  

## <a name="see-also"></a><span data-ttu-id="254d6-207">See Also</span><span class="sxs-lookup"><span data-stu-id="254d6-207">See Also</span></span>

[<span data-ttu-id="254d6-208">View the Status of a Synchronisation</span><span class="sxs-lookup"><span data-stu-id="254d6-208">View the Status of a Synchronization</span></span>](admin-how-to-view-synchronization-status.md)  
